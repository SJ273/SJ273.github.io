<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .body {
            text-align: center;
        }
        #random {
            white-space: pre-line;
        }
    </style>
    <title>SJ273のポートフォリオ - おみくじ</title>
</head>
<body>
    <div class="body">
<h2>今日のおみくじ</h2>
<button onclick="omikuji()">おみくじを引く</button>

<p id="result"></p>
<p id="comment"></p>

<script>
const comments = {
  "大吉": ["最高の日！", "今日は無敵！"],
  "中吉": ["順調だよ", "いい流れ"],
  "小吉": ["コツコツいこう"],
  "吉": ["安定の日"],
  "凶": ["無理しないでね"]
};

const today = new Date();
const todayStr = today.toDateString();
const savedDay = localStorage.getItem("omikujiDay");
const savedResult = localStorage.getItem("omikujiResult");

if (savedDay === todayStr && savedResult) {
  showResult(savedResult);
}

function omikuji() {
  const savedDay = localStorage.getItem("omikujiDay");

  if (savedDay === todayStr) {
    document.getElementById("comment").textContent =
      "今日はもう引いています。また明日来てください。";
    return;
  }

  const r = Math.random() * 100;
  let result = "";

  if (r < 10) {
    result = "大吉";
  } else if (r < 30) {
    result = "中吉";
  } else if (r < 60) {
    result = "小吉";
  } else if (r < 85) {
    result = "吉";
  } else {
    result = "凶";
  }

  localStorage.setItem("omikujiDay", todayStr);
  localStorage.setItem("omikujiResult", result);

  showResult(result);
}

const list = comments[result];
const randomIndex = Math.floor(Math.random() * list.length);
document.getElementById("comment").textContent = list[randomIndex];

</script>
</body>
</html>
